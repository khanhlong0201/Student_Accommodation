use BHM
go
create or alter proc BHM_USER_LOGIN
(
    @UserName varchar(30)
	,@PassWord nvarchar(90)-- pass được mã hóa
)
as
/*
   desc: Login vào hệ thống
*/

begin
    if not exists(select 1 from[USER] 
	    where UserName collate SQL_Latin1_General_Cp850_CS_AS = @UserName collate SQL_Latin1_General_Cp850_CS_AS
    and[Password] = @PassWord)
    begin
	    select '-1' AS[Status], N'Sai thông tin đăng nhập' AS[Message];
        return;
    end

	select '0' AS[Status], N'Success' AS[Message], * from[USER] with (nolock)
	 where UserName collate SQL_Latin1_General_Cp850_CS_AS = @UserName collate SQL_Latin1_General_Cp850_CS_AS
           and[Password] = @PassWord
end